<div class="post_show_point_form_box">
  <p class="post_show_point_check">復習チェック履歴</p>
  <%# ポイント一覧テーブル %>
  <table class="post_show_point_table">
    <thead class="post_show_point_thead">
      <tr>
        <td>CHECK!</td>
        <td></td>
        <td>ポイント</td>
        <td></td>
        <td>実施時間</td>
        <td>通知時間</td>
      </tr>
    </thead>
    <tbody class="post_show_point_tbody">
      <%# postテーブルのrelearn_countの値に応じて表示するフォームを変える %>
      <%# 復習回数が0のとき %>
      <% if post.relearn_count == 0 %>
          <tr>
            <td>first</td>
            <td></td>
            <td><%= relearn_point.first_score %> / 100 P</td>
            <td></td>
            <td></td>
            <td><%= plan_timing.first_term.strftime("%Y-%m-%d %H:%M") %></td>
          </tr>
          <tr>
            <td>second</td>
            <td></td>
            <td><%= relearn_point.second_score %> / 200 P</td>
            <td></td>
            <td></td>
            <td><%= plan_timing.second_term.strftime("%Y-%m-%d %H:%M") %></td>
          </tr>
          <tr>
            <td>third</td>
            <td></td>
            <td><%= relearn_point.third_score %> / 300 P</td>
            <td></td>
            <td></td>
            <td><%= plan_timing.third_term.strftime("%Y-%m-%d %H:%M") %></td>
          </tr>
          <tr>
            <td>forth</td>
            <td></td>
            <td><%= relearn_point.forth_score %> / 400 P</td>
            <td></td>
            <td></td>
            <td><%= plan_timing.forth_term.strftime("%Y-%m-%d %H:%M") %></td>
          </tr>
      <%# 復習回数が1のとき %>
      <% elsif post.relearn_count == 1 %>
        <tr>
          <td>first</td>
          <td><i class="far fa-check-square"></i></td>
          <td><%= relearn_point.first_score %> / 100 P</td>
          <td></td>
          <td><%= real_timing.first_term.strftime("%Y-%m-%d %H:%M") unless real_timing.first_term.nil? %></td>
          <td><%= plan_timing.first_term.strftime("%Y-%m-%d %H:%M") %></td>
        </tr>
        <tr>
          <td>second</td>
          <td></td>
          <td><%= relearn_point.second_score %> / 200 P</td>
          <td></td>
          <td></td>
          <td><%= plan_timing.second_term.strftime("%Y-%m-%d %H:%M") %></td>
        </tr>
        <tr>
          <td>third</td>
          <td></td>
          <td><%= relearn_point.third_score %> / 300 P</td>
          <td></td>
          <td></td>
          <td><%= plan_timing.third_term.strftime("%Y-%m-%d %H:%M") %></td>
        </tr>
        <tr>
          <td>forth</td>
          <td></td>
          <td><%= relearn_point.forth_score %> / 400 P</td>
          <td></td>
          <td></td>
          <td><%= plan_timing.forth_term.strftime("%Y-%m-%d %H:%M") %></td>
        </tr>
      <%# 復習回数が2のとき %>
      <% elsif post.relearn_count == 2 %>
        <tr>
          <td>first</td>
          <td><i class="far fa-check-square"></i></td>
          <td><%= relearn_point.first_score %> / 100 P</td>
          <td></td>
          <td><%= real_timing.first_term.strftime("%Y-%m-%d %H:%M") unless real_timing.first_term.nil? %></td>
          <td><%= plan_timing.first_term.strftime("%Y-%m-%d %H:%M") %></td>
        </tr>
        <tr>
          <td>second</td>
          <td><i class="far fa-check-square"></i></td>
          <td><%= relearn_point.second_score %> / 200 P</td>
          <td></td>
          <td><%= real_timing.second_term.strftime("%Y-%m-%d %H:%M") unless real_timing.second_term.nil? %></td>
          <td><%= plan_timing.second_term.strftime("%Y-%m-%d %H:%M") %></td>
        </tr>
        <tr>
          <td>third</td>
          <td></td>
          <td><%= relearn_point.third_score %> / 300 P</td>
          <td></td>
          <td></td>
          <td><%= plan_timing.third_term.strftime("%Y-%m-%d %H:%M") %></td>
        </tr>
        <tr>
          <td>forth</td>
          <td></td>
          <td><%= relearn_point.forth_score %> / 400 P</td>
          <td></td>
          <td></td>
          <td><%= plan_timing.forth_term.strftime("%Y-%m-%d %H:%M") %></td>
        </tr>
      <%# 復習回数が3のとき %>
      <% elsif post.relearn_count == 3 %>
        <tr>
          <td>first</td>
          <td><i class="far fa-check-square"></i></td>
          <td><%= relearn_point.first_score %> / 100 P</td>
          <td></td>
          <td><%= real_timing.first_term.strftime("%Y-%m-%d %H:%M") unless real_timing.first_term.nil?%></td>
          <td><%= plan_timing.first_term.strftime("%Y-%m-%d %H:%M") %></td>
        </tr>
        <tr>
          <td>second</td>
          <td><i class="far fa-check-square"></i></td>
          <td><%= relearn_point.second_score %> / 200 P</td>
          <td></td>
          <td><%= real_timing.second_term.strftime("%Y-%m-%d %H:%M") unless real_timing.second_term.nil? %></td>
          <td><%= plan_timing.second_term.strftime("%Y-%m-%d %H:%M") %></td>
        </tr>
        <tr>
          <td>third</td>
          <td><i class="far fa-check-square"></i></td>
          <td><%= relearn_point.third_score %> / 300 P</td>
          <td></td>
          <td><%= real_timing.third_term.strftime("%Y-%m-%d %H:%M") unless real_timing.third_term.nil? %></td>
          <td><%= plan_timing.third_term.strftime("%Y-%m-%d %H:%M") %></td>
        </tr>
        <tr>
          <td>forth</td>
          <td></td>
          <td><%= relearn_point.forth_score %> / 400 P</td>
          <td></td>
          <td></td>
          <td><%= plan_timing.forth_term.strftime("%Y-%m-%d %H:%M") %></td>
        </tr>
      <%# 復習回数が4のとき %>
      <% elsif post.relearn_count == 4 %>
        <tr>
          <td>first</td>
          <td><i class="far fa-check-square"></i></td>
          <td><%= relearn_point.first_score %> / 100 P</td>
          <td></td>
          <td><%= real_timing.first_term.strftime("%Y-%m-%d %H:%M") unless real_timing.first_term.nil?%></td>
          <td><%= plan_timing.first_term.strftime("%Y-%m-%d %H:%M") %></td>
        </tr>
        <tr>
          <td>second</td>
          <td><i class="far fa-check-square"></i></td>
          <td><%= relearn_point.second_score %> / 200 P</td>
          <td></td>
          <td><%= real_timing.second_term.strftime("%Y-%m-%d %H:%M") unless real_timing.second_term.nil? %></td>
          <td><%= plan_timing.second_term.strftime("%Y-%m-%d %H:%M") %></td>
        </tr>
        <tr>
          <td>third</td>
          <td><i class="far fa-check-square"></i></td>
          <td><%= relearn_point.third_score %> / 300 P</td>
          <td></td>
          <td><%= real_timing.third_term.strftime("%Y-%m-%d %H:%M") unless real_timing.third_term.nil? %></td>
          <td><%= plan_timing.third_term.strftime("%Y-%m-%d %H:%M") %></td>
        </tr>
        <tr>
          <td>forth</td>
          <td><i class="far fa-check-square"></i></td>
          <td><%= relearn_point.forth_score %> / 400 P</td>
          <td></td>
          <td><%= real_timing.forth_term.strftime("%Y-%m-%d %H:%M") unless real_timing.forth_term.nil? %></td>
          <td><%= plan_timing.forth_term.strftime("%Y-%m-%d %H:%M") %></td>
        </tr>
      <% else %>
        <p>データが異常です。管理者に問い合わせをお願いします。</p>
      <% end %>
    </tbody>
    <tfoot class="post_show_point_tfoot">
      <tr>
        <td></td>
        <td></td>
        <td><%= @relearn_point.first_score + relearn_point.second_score + relearn_point.third_score+ relearn_point.forth_score %> / 1000P</td>
        <td></td>
        <td></td>
      </tr>
    </tfoot>
  </table>
</div>

